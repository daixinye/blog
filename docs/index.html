<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Daixinye</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Daixinye">
<meta property="og:url" content="http://daixinye.com/index.html">
<meta property="og:site_name" content="Daixinye">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Daixinye">
  
    <link rel="alternate" href="/atom.xml" title="Daixinye" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Daixinye</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-github" class="nav-icon" title="github" target="_blank" href="https://github.com/daixinye"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://daixinye.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2017-07-06-Shell 脚本入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/06/2017-07-06-Shell 脚本入门/" class="article-date">
  <time datetime="2017-07-06T12:00:00.000Z" itemprop="datePublished">2017-07-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/shell/">shell</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/06/2017-07-06-Shell 脚本入门/">Shell 脚本入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在本文开始之前，我想先阐述一下本文的基本内容。</p>
<p>本文的标题是《Shell 脚本入门》，内容将涵盖 如何写一个基本的 Shell 脚本、如何运行它、一些基本的流程控制和判断，以及更多可供参考学习的站点。</p>
<p>那话不多说，让我们从一个最简单的 Shell 脚本开始吧~</p>
<h2 id="一、Hello-World"><a href="#一、Hello-World" class="headerlink" title="一、Hello World"></a>一、Hello World</h2><p>打开一个文本编辑器，输入以下脚本代码，保存为 helloworld.sh：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"></div><div class="line"># it&apos;s just a demo</div><div class="line"></div><div class="line">echo &quot;Hello World&quot;</div></pre></td></tr></table></figure>
<p>接着，打开 命令行 ，切换至 helloworld.sh 所在目录，并输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ /bin/sh helloworld.sh</div></pre></td></tr></table></figure>
<p>可以看到，命令行中输出了 “哈喽沃德”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hello World</div></pre></td></tr></table></figure>
<p>好了，这就是我们使用一个 Shell 脚本的基本流程：编写脚本 =&gt; 运行脚本 =&gt; 运行结果。</p>
<h2 id="二、编写的三个要素"><a href="#二、编写的三个要素" class="headerlink" title="二、编写的三个要素"></a>二、编写的三个要素</h2><p>观察一下我们的 helloworld.sh，我们可以把它分为三部分：指定程序、注释说明 以及 脚本命令。</p>
<h3 id="1、指定程序：-bin-sh"><a href="#1、指定程序：-bin-sh" class="headerlink" title="1、指定程序：#!/bin/sh"></a>1、指定程序：<code>#!/bin/sh</code></h3><p>符号 <code>#!</code> 用于指定运行该脚本使用的程序。</p>
<p>在 helloworld.sh 中，我们用 <code>/bin/sh</code>来执行这个脚本。</p>
<h3 id="2、注释说明：-it-39-s-just-a-demo"><a href="#2、注释说明：-it-39-s-just-a-demo" class="headerlink" title="2、注释说明：# it&#39;s just a demo"></a>2、注释说明：<code># it&#39;s just a demo</code></h3><p>注释，以 <code>#</code> 开头的一行表示注释。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"></div><div class="line"># 这里是注释 </div><div class="line"># 可以用来解释这个脚本是用来做什么的 </div><div class="line"></div><div class="line">######### 分割线 #############</div><div class="line"># 你也可以用多个#来做注释之间的分割</div><div class="line">#############################</div><div class="line"></div><div class="line">echo &quot;Hello World&quot;</div></pre></td></tr></table></figure>
<h3 id="3、脚本命令：-echo-quot-Hello-World-quot"><a href="#3、脚本命令：-echo-quot-Hello-World-quot" class="headerlink" title="3、脚本命令： echo &quot;Hello World&quot;"></a>3、脚本命令： <code>echo &quot;Hello World&quot;</code></h3><p><code>echo</code>用于在命令行中打印指定的字符串。</p>
<p>你可以用单引号、双引号将要打印的字符串包裹起来，也可以选择不用引号。</p>
<h2 id="三、运行的两个方式"><a href="#三、运行的两个方式" class="headerlink" title="三、运行的两个方式"></a>三、运行的两个方式</h2><p>运行一个脚本，有两种方法：作为参数 或者是 作为可执行文件。</p>
<h3 id="1、作为参数"><a href="#1、作为参数" class="headerlink" title="1、作为参数"></a>1、作为参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ /bin/bash ./helloworld.sh</div></pre></td></tr></table></figure>
<p>可以看到，我们通过给 <code>/bin/bash</code> 这个程序指定要运行的脚本，来运行 helloworld.sh 的。</p>
<h3 id="2、作为可执行文件"><a href="#2、作为可执行文件" class="headerlink" title="2、作为可执行文件"></a>2、作为可执行文件</h3><p>首先，我们让这个脚本变成<strong>可执行</strong>的程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ chmod +x helloworld.sh</div></pre></td></tr></table></figure>
<p>接下来，就可以直接运行这个脚本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./helloworld.sh</div></pre></td></tr></table></figure>
<h2 id="四、小进阶"><a href="#四、小进阶" class="headerlink" title="四、小进阶"></a>四、小进阶</h2><p>在了解了基本的 Shell 编程之后，我们来让 Shell 脚本做更多的事情。</p>
<h3 id="1、读取输入"><a href="#1、读取输入" class="headerlink" title="1、读取输入"></a>1、读取输入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"></div><div class="line"># read.sh</div><div class="line"></div><div class="line">echo &quot;你的名字？&quot;</div><div class="line">read name</div><div class="line"></div><div class="line">echo &quot;你好 $name，很高兴认识你。&quot;</div></pre></td></tr></table></figure>
<p>运行一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ /bin/sh read.sh </div><div class="line">你的名字？</div></pre></td></tr></table></figure>
<p>输入 <code>daixinye</code>，回车：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">你好daixinye，很高兴认识你。</div></pre></td></tr></table></figure>
<h3 id="2、条件判断"><a href="#2、条件判断" class="headerlink" title="2、条件判断"></a>2、条件判断</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"></div><div class="line"># if.sh</div><div class="line"></div><div class="line">echo &quot;你的年龄？&quot;</div><div class="line">read age</div><div class="line"></div><div class="line"># 注意 等号左右两边 不能有空格</div><div class="line">myAge=18</div><div class="line"></div><div class="line"># 注意 方括号内部前后 需要有空格</div><div class="line">if [ $age == $myAge ]</div><div class="line">    then </div><div class="line">        echo &quot;我们岁数一样哦&quot;</div><div class="line">    else </div><div class="line">        echo &quot;我们岁数不一样哦&quot; </div><div class="line">fi</div></pre></td></tr></table></figure>
<p>运行一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ /bin/sh if.sh </div><div class="line">你的年龄？</div></pre></td></tr></table></figure>
<p>输入 <code>18</code>，回车：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">我们岁数一样哦</div></pre></td></tr></table></figure>
<h3 id="3、条件循环"><a href="#3、条件循环" class="headerlink" title="3、条件循环"></a>3、条件循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"></div><div class="line"># while.sh</div><div class="line"></div><div class="line">echo &quot;我有一个数字，你要来猜一下吗？1~1000哦&quot;</div><div class="line"></div><div class="line">answer=666</div><div class="line">bingo=0</div><div class="line"></div><div class="line">while [ $bingo == 0 ]; do </div><div class="line">    read guess</div><div class="line">    if [ $guess == $answer ]</div><div class="line">        then</div><div class="line">            echo &quot;猜对啦&quot;</div><div class="line">            bingo=1</div><div class="line">        else</div><div class="line">            echo &quot;猜错啦，再猜一次吧？&quot;</div><div class="line">    fi</div><div class="line">done</div></pre></td></tr></table></figure>
<p>运行一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ /bin/sh while.sh </div><div class="line">我有一个数字，你要来猜一下吗？1~1000哦</div></pre></td></tr></table></figure>
<p>依次输入1、5、10、100、600、666 ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">猜错啦，再猜一次吧？</div><div class="line">5</div><div class="line">猜错啦，再猜一次吧？</div><div class="line">10</div><div class="line">猜错啦，再猜一次吧？</div><div class="line">100</div><div class="line">猜错啦，再猜一次吧？</div><div class="line">600</div><div class="line">猜错啦，再猜一次吧？</div><div class="line">666</div><div class="line">猜对啦</div></pre></td></tr></table></figure>
<h2 id="五、小结"><a href="#五、小结" class="headerlink" title="五、小结"></a>五、小结</h2><p>好啦，通过本文你应该已经了解了以下几个知识点：</p>
<ol>
<li>如何写一个基本 Shell脚本</li>
<li>如何打印内容（echo）</li>
<li>如何运行脚本（作为参数和作为可执行程序）</li>
<li>如何读取输入（read）</li>
<li>如何进行条件判断（if…else 语句）</li>
<li>如何进行条件循环（while… do 语句）</li>
</ol>
<h2 id="本文参考"><a href="#本文参考" class="headerlink" title="本文参考"></a>本文参考</h2><p><a href="https://my.oschina.net/maczhao/blog/349452" target="_blank" rel="external">https://my.oschina.net/maczhao/blog/349452</a></p>
<h2 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h2><p><a href="https://github.com/daixinye/practice/tree/master/shell" target="_blank" rel="external">https://github.com/daixinye/practice/tree/master/shell</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-07-05-CSS：什么是 BFC" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/05/2017-07-05-CSS：什么是 BFC/" class="article-date">
  <time datetime="2017-07-05T12:00:00.000Z" itemprop="datePublished">2017-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/css/">css</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/05/2017-07-05-CSS：什么是 BFC/">CSS：什么是 BFC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="什么是-BFC"><a href="#什么是-BFC" class="headerlink" title="什么是 BFC"></a>什么是 BFC</h2><p>BFC，Block Formatting Context，直译为<strong>块级格式化上下文</strong>。</p>
<p>在 BFC 中，HTML 元素按照一定的规则进行布局，并且不管其中的元素如何变换样式，均不会影响 BFC 外部的任何元素同样也不受外部任何元素的影响。</p>
<h2 id="触发-BFC-的方法"><a href="#触发-BFC-的方法" class="headerlink" title="触发 BFC 的方法"></a>触发 BFC 的方法</h2><h3 id="0、the-root-element"><a href="#0、the-root-element" class="headerlink" title="0、the root element"></a>0、the root element</h3><p>一个 HTML 文档本身就是一个 BFC 。</p>
<h3 id="1、float"><a href="#1、float" class="headerlink" title="1、float"></a>1、float</h3><p>float 属性不为 none 时，即如果一个元素是浮动元素，那么它就是一个 BFC 。</p>
<ul>
<li>float: left;</li>
<li>float: right;</li>
</ul>
<h3 id="2、overflow"><a href="#2、overflow" class="headerlink" title="2、overflow"></a>2、overflow</h3><p>overflow 属性不为 visible 时，即 overflow 为auto、scroll、hidden 时会形成一个 BFC 。</p>
<ul>
<li>overflow: hidden;</li>
<li>overflow: scroll;</li>
<li>overflow: auto; </li>
</ul>
<h3 id="3、display"><a href="#3、display" class="headerlink" title="3、display"></a>3、display</h3><p>display 属性为 table-cell、table-caption 或 inline-block 时也会触发 BFC。</p>
<ul>
<li>display: table-cell;</li>
<li>display: table-caption;</li>
<li>display: inline-block;</li>
</ul>
<h3 id="4、position"><a href="#4、position" class="headerlink" title="4、position"></a>4、position</h3><p>position 属性不为 relative 或 static 时，即 postion 为 absolute、fixed 时也会触发 BFC 。</p>
<ul>
<li>position: relative;</li>
<li>position: fixed;</li>
</ul>
<h2 id="BFC-的作用"><a href="#BFC-的作用" class="headerlink" title="BFC 的作用"></a>BFC 的作用</h2><ul>
<li><p>不让文字环绕浮动的兄弟元素（自适应布局）</p>
</li>
<li><p>在有浮动子元素的情况下，不让父元素高度坍缩（包含浮动）</p>
</li>
<li><p>让兄弟元素之间的外边距不重合（边距折叠）</p>
</li>
</ul>
<p>测试代码：<a href="https://github.com/daixinye/practice/blob/master/HTML/BFC.html" target="_blank" rel="external">https://github.com/daixinye/practice/blob/master/HTML/BFC.html</a></p>
<p>参考：</p>
<p><a href="https://www.w3cplus.com/css/understanding-bfc-and-margin-collapse.html" target="_blank" rel="external">https://www.w3cplus.com/css/understanding-bfc-and-margin-collapse.html</a></p>
<p><a href="http://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/" target="_blank" rel="external">http://www.zhangxinxu.com/wordpress/2015/02/css-deep-understand-flow-bfc-column-two-auto-layout/</a></p>
<p><a href="http://www.cnblogs.com/MockingBirdHome/p/3365346.html" target="_blank" rel="external">http://www.cnblogs.com/MockingBirdHome/p/3365346.html</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-06-21-Vue：基础用法与指令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/21/2017-06-21-Vue：基础用法与指令/" class="article-date">
  <time datetime="2017-06-21T12:00:00.000Z" itemprop="datePublished">2017-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/21/2017-06-21-Vue：基础用法与指令/">Vue：基础用法与指令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Vue-是什么？"><a href="#Vue-是什么？" class="headerlink" title="Vue 是什么？"></a>Vue 是什么？</h2><p>Vue 是一套构建用户界面的渐进式框架，采用自底向上增量开发的设计。Vue 的核心库值关注视图层（View）。</p>
<h2 id="声明式渲染"><a href="#声明式渲染" class="headerlink" title="声明式渲染"></a>声明式渲染</h2><h3 id="文本插值"><a href="#文本插值" class="headerlink" title="文本插值"></a>文本插值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">    &#123;&#123; message &#125;&#125;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var app = new Vue(&#123;</div><div class="line">    el:&apos;#app&apos;,</div><div class="line">    data: &#123;</div><div class="line">        message: &apos;hello&apos;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="渲染-DOM-属性（-v-bind-name-指令）"><a href="#渲染-DOM-属性（-v-bind-name-指令）" class="headerlink" title="渲染 DOM 属性（ v-bind:name 指令）"></a>渲染 DOM 属性（ v-bind:name 指令）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;span v-bind:title=&quot;message&quot;&gt;</div><div class="line">        鼠标悬停此处查看动态提示信息</div><div class="line">    &lt;/span&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var app = new Vue(&#123;</div><div class="line">    el: &apos;#app&apos;,</div><div class="line">    data: &#123;</div><div class="line">        message: &apos;提示信息&apos;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>v-bind 属性被称为指令（指令带有前缀 v-，以表示他们是 Vue 提供的特殊属性）。这里该指令的作用是“将这个元素的 title 属性和 Vue 实例的 message 属性保持一致”。</p>
<h2 id="条件与循环（-v-if-指令和-v-for-指令）"><a href="#条件与循环（-v-if-指令和-v-for-指令）" class="headerlink" title="条件与循环（ v-if 指令和 v-for 指令）"></a>条件与循环（ v-if 指令和 v-for 指令）</h2><h3 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;p v-if=&quot;seen&quot;&gt;看到了没？&lt;/p&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var app = new Vue(&#123;</div><div class="line">    el: &apos;#app&apos;,</div><div class="line">    data: &#123;</div><div class="line">        seen: true</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;ol&gt;</div><div class="line">        &lt;li v-for=&quot;todo in todos&quot;&gt;</div><div class="line">            &#123;&#123; todo.text &#125;&#125;</div><div class="line">        &lt;/li&gt;</div><div class="line">    &lt;/ol&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var app = new Vue(&#123;</div><div class="line">    el: &apos;#app&apos;,</div><div class="line">    data: &#123;</div><div class="line">        todos:［</div><div class="line">            &#123; text : &apos;吃饭&apos; &#125;,</div><div class="line">            &#123; text : &apos;睡觉&apos; &#125;,</div><div class="line">            &#123; text : &apos;打游戏&apos; &#125;</div><div class="line">        ］</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="处理用户输入（-v-on-指令和-v-model-指令）"><a href="#处理用户输入（-v-on-指令和-v-model-指令）" class="headerlink" title="处理用户输入（ v-on 指令和 v-model 指令）"></a>处理用户输入（ v-on 指令和 v-model 指令）</h2><h3 id="事件监听器"><a href="#事件监听器" class="headerlink" title="事件监听器"></a>事件监听器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</div><div class="line">    &lt;button v-on:click=&quot;reverseMessage&quot;&gt;逆转消息&lt;/</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var app = new Vue(&#123;</div><div class="line">    el:&apos;#app&apos;,</div><div class="line">    data: &#123;</div><div class="line">        message: &apos;hello&apos;</div><div class="line">    &#125;,</div><div class="line">    methods: &#123;</div><div class="line">        reverseMessage: function()&#123;</div><div class="line">            this.message = this.message.split(&apos;&apos;).reverse().join()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="双向绑定"><a href="#双向绑定" class="headerlink" title="双向绑定"></a>双向绑定</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</div><div class="line">    &lt;input v-model=&quot;message&quot; &gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var app = new Vue(&#123;</div><div class="line">    el: &apos;#app&apos;,</div><div class="line">    data:&#123;</div><div class="line">        message: &apos;hello&apos;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;app&quot;&gt;</div><div class="line">    &lt;ol&gt;</div><div class="line">        &lt;todo-item v-for=&quot;item in list&quot; v-bind:todo=&quot;item&quot;&gt;&lt;/todo-item&gt;</div><div class="line">    &lt;/ol&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Vue.component(&apos;todo-item&apos;, &#123;</div><div class="line">    props: [&apos;todo&apos;], //接受一个自定义属性todo</div><div class="line">    template: &apos;&lt;li&gt;&#123;&#123; todo.text &#125;&#125;&lt;/li&gt;&apos;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">var app = new Vue(&#123;</div><div class="line">    el:&apos;#app&apos;,</div><div class="line">    data: &#123;</div><div class="line">        list : [</div><div class="line">            &#123; text: &apos;apple&apos; &#125;,</div><div class="line">            &#123; text: &apos;banana&apos; &#125;,</div><div class="line">            &#123; text: &apos;orange&apos; &#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>注意，在这个例子中 v-for 循环渲染子组件 todo-item ，并传递了 item 变量。接着 v-bind 指令将 item 与子组件的 todo 属性绑定起来，接受到 todo 属性的子组件读取 todo.text 插入到 &lt;li&gt; 中。整个过程，父组件向子组件单向传递数据并渲染出来。</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><ul>
<li>v-bind:name </li>
<li>v-if </li>
<li>v-for</li>
<li>v-on</li>
<li>v-model</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="external">https://cn.vuejs.org/v2/guide/</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-06-21-CSS：Animation 动画" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/21/2017-06-21-CSS：Animation 动画/" class="article-date">
  <time datetime="2017-06-21T12:00:00.000Z" itemprop="datePublished">2017-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/css/">css</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/21/2017-06-21-CSS：Animation 动画/">CSS：Animation 动画小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><ul>
<li>animation-delay 延时</li>
<li>animation-direction 动画重复播放时是反向运行还是回到开始位置</li>
<li>animation-duration 动画持续时间</li>
<li>animation-iteration-count 动画重复次数</li>
<li>animation-name 关键帧名称</li>
<li>animation-play-state 允许暂停和回复动画</li>
<li>animation-timing-function 动画速度函数</li>
<li>animation-fill-mode 动画执行前后目标元素如何应用样式</li>
</ul>
<h2 id="关键帧-keyframes"><a href="#关键帧-keyframes" class="headerlink" title="关键帧 keyframes"></a>关键帧 keyframes</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">p &#123;</div><div class="line">    animation-name: slidein;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@keyframes slidein &#123;</div><div class="line">    from &#123;</div><div class="line">        margin-left: 100%;</div><div class="line">        width: 300%;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    to &#123;</div><div class="line">        margin-left: 0%;</div><div class="line">        width: 100%;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>除了 from 和 to ，也可以用百分比来定义关键帧。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">@keyframes slidein &#123;</div><div class="line">    0% &#123;</div><div class="line">        margin-left: 100%;</div><div class="line">        width: 300%;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    50% &#123;</div><div class="line">        margin-left: 70%;</div><div class="line">        witdh: 250%;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    100% &#123;</div><div class="line">        margin-left: 0;</div><div class="line">        width: 100%;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="重复播放动画"><a href="#重复播放动画" class="headerlink" title="重复播放动画"></a>重复播放动画</h2><p>设置 <code>animation-iteration-coutn</code> 为 <code>infinite</code> 即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">p &#123;</div><div class="line">    animation-name: slidein;</div><div class="line">    animation-iteration-count: infinite;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="来回播放动画"><a href="#来回播放动画" class="headerlink" title="来回播放动画"></a>来回播放动画</h2><p>设置 <code>animation-direction</code> 为 <code>alternate</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">p &#123;</div><div class="line">    animation-name: slidein;</div><div class="line">    animation-iteration-count: infinite;</div><div class="line">    animation-direction: alternate;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="动画事件-Animation-Event"><a href="#动画事件-Animation-Event" class="headerlink" title="动画事件 Animation Event"></a>动画事件 Animation Event</h2><ul>
<li>animationstart 动画开始时</li>
<li>animationend 动画结束时</li>
<li>animationiteration 开始重复动画时</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&apos;p&apos;).on(&apos;animationiteration webkitAnimationIteration&apos;, (e) =&gt; &#123;</div><div class="line">    // do something</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>注意添加 webkit 前缀，以兼容低版本浏览器。</p>
<h2 id="移动设备兼容性"><a href="#移动设备兼容性" class="headerlink" title="移动设备兼容性"></a>移动设备兼容性</h2><p> iOS 9.2 起、安卓 4.2~4.3 起（需添加 webkit 前缀）</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.runoob.com/jsref/event-animationiteration.html" target="_blank" rel="external">http://www.runoob.com/jsref/event-animationiteration.html</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/AnimationEvent" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/API/AnimationEvent</a></p>
<p><a href="https://caniuse.com/#search=animation" target="_blank" rel="external">https://caniuse.com/#search=animation</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-06-01-CSS：table-cell 用法小" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/01/2017-06-01-CSS：table-cell 用法小/" class="article-date">
  <time datetime="2017-06-01T12:00:00.000Z" itemprop="datePublished">2017-06-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/css/">css</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/01/2017-06-01-CSS：table-cell 用法小/">CSS：table-cell 用法小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1、垂直居中"><a href="#1、垂直居中" class="headerlink" title="1、垂直居中"></a>1、垂直居中</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;table-cell&quot;&gt;</div><div class="line">    &lt;div&gt;需要垂直居中的元素&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.table-cell &#123;</div><div class="line">    display: table-cell;</div><div class="line">    verticall-align: middle;</div><div class="line">    height: 200px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2、等高布局"><a href="#2、等高布局" class="headerlink" title="2、等高布局"></a>2、等高布局</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;table&quot;&gt;</div><div class="line">    &lt;div class=&quot;table-cell&quot;&gt;</div><div class="line">        &lt;div&gt;等高布局&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div class=&quot;table-cell width-100&quot;&gt;</div><div class="line">        &lt;div&gt;table-cell的高度取决于所有table-cell中最大的高度&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">.table &#123;</div><div class="line">    display: table;</div><div class="line">&#125;</div><div class="line">.table-cell &#123;</div><div class="line">    display: table-cell;</div><div class="line">&#125;</div><div class="line">.width-100 &#123;</div><div class="line">    width: 100px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3、平均划分子元素"><a href="#3、平均划分子元素" class="headerlink" title="3、平均划分子元素"></a>3、平均划分子元素</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;table&quot;&gt;</div><div class="line">    &lt;div class=&quot;table-cell&quot;&gt;</div><div class="line">        子元素</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div class=&quot;table-cell&quot;&gt;</div><div class="line">        子元素</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;div class=&quot;table-cell&quot;&gt;</div><div class="line">        子元素</div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">.table &#123;</div><div class="line">    display: table;</div><div class="line">    width: 100%;</div><div class="line">&#125;</div><div class="line">.table-cell &#123;</div><div class="line">    display: table-cell;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://my.oschina.net/CharmyZ/blog/714983" target="_blank" rel="external">https://my.oschina.net/CharmyZ/blog/714983</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-05-28-JavaScript：Promise 小记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/28/2017-05-28-JavaScript：Promise 小记/" class="article-date">
  <time datetime="2017-05-28T12:00:00.000Z" itemprop="datePublished">2017-05-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/28/2017-05-28-JavaScript：Promise 小记/">JavaScript：Promise 小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Promise 对象是一个代理对象（代理一个值），被代理的值在 Promise 对象创建时可能是未知的。它最主要的特点，是可以让异步代码像同步方法那样返回值，并为结果的成功（onFulfilled）和失败（onRejected）绑定相应的处理方法（Handlers）。需要注意的是，尽管看起来像同步方法那样返回了值但是并不是<strong>立即返回执行</strong>的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">new Promise(function(resolve, reject)&#123;</div><div class="line">    resolve(1);</div><div class="line">&#125;).then(function(msg)&#123;</div><div class="line">    console.log(msg);</div><div class="line">&#125;)</div><div class="line"></div><div class="line">console.log(2);</div><div class="line"></div><div class="line">// 输出顺序为</div><div class="line">// 2</div><div class="line">// 1</div></pre></td></tr></table></figure>
<p>一个 Promise 有以下几种状态：</p>
<ul>
<li>pendding 初始状态</li>
<li>fulfilled 意味着操作成功</li>
<li>rejected 意味着操作失败</li>
</ul>
<p><img src="https://mdn.mozillademos.org/files/8633/promises.png" alt=""></p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">var promise = new Promise(</div><div class="line">    /* executor */</div><div class="line">    function(resolve, reject) &#123;...&#125;</div><div class="line">);</div><div class="line"></div><div class="line">// 第一种处理方式</div><div class="line">promise.then(</div><div class="line">    /* onFulfilled */</div><div class="line">    function()&#123;...&#125;,</div><div class="line">    </div><div class="line">    /* onRejected */</div><div class="line">    function()&#123;...&#125;</div><div class="line">)</div><div class="line"></div><div class="line">// 第二种处理方式</div><div class="line">promise.then(</div><div class="line">    /* onFulfilled */</div><div class="line">    function()&#123;...&#125;</div><div class="line">).catch(</div><div class="line">    /* onRejected */</div><div class="line">    function()&#123;...&#125;</div><div class="line">)</div></pre></td></tr></table></figure>
<h2 id="与回调函数的区别"><a href="#与回调函数的区别" class="headerlink" title="与回调函数的区别"></a>与回调函数的区别</h2><p>先来看一下一个普通的异步处理，使用回调函数来处理回调的结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">getAsycn(&quot;file.txt&quot;, function(error, result)&#123;</div><div class="line">    </div><div class="line">    if(error)&#123; // 取得失败时的处理</div><div class="line">        throw error;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    // 取得成功时的处理</div><div class="line">    </div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>接下来是使用Promise的处理方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var promise = getAsyncPromise(&quot;file.txt&quot;); // 返回一个Promise对象</div><div class="line"></div><div class="line">promise.then(function(result)&#123;</div><div class="line">    // 取得成功时的处理</div><div class="line">    </div><div class="line">&#125;.catch(function(error)&#123;</div><div class="line">    // 取得失败时的处理</div><div class="line">    </div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-05-23-什么是Hybrid App" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/23/2017-05-23-什么是Hybrid App/" class="article-date">
  <time datetime="2017-05-23T07:30:00.000Z" itemprop="datePublished">2017-05-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/fe/">fe</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/23/2017-05-23-什么是Hybrid App/">什么是Hybrid App</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="什么是Hybrid"><a href="#什么是Hybrid" class="headerlink" title="什么是Hybrid"></a>什么是Hybrid</h2><h3 id="Hybrid-出现的历史原因"><a href="#Hybrid-出现的历史原因" class="headerlink" title="Hybrid 出现的历史原因"></a>Hybrid 出现的历史原因</h3><ul>
<li>2013年起移动互联网的兴起导致App开发的需求日益高涨。</li>
<li>2014年 H5 的发布，使得 Web 能够实现更多功能。</li>
<li>在产品需要快速迭代、抢占市场的大背景下，开发 iOS 和 Android 原生应用的时间成本和劳动成本都非常高。</li>
<li>随着 iOS 和 Android 两大阵营对 H5 的支持日益完善，H5 足以实现大多数的需求。</li>
<li>为了利用 Web 应用低成本、高效率、跨成本等诸多优点，出现了使用 Web 和 Native 混合进行开发的模式。</li>
</ul>
<h3 id="Hybrid-的分类"><a href="#Hybrid-的分类" class="headerlink" title="Hybrid 的分类"></a>Hybrid 的分类</h3><p>App 应用从实现机制上来区分，主要分为三类：</p>
<ol>
<li>Native 应用：使用原生语言的应用，能够调用所有底层接口，交互体验最好。</li>
<li>Web App 应用：使用纯 Web 开发的应用，通过浏览器访问，交互体验最差。</li>
<li>Hybrid 应用：<ol>
<li>以 WebView 作为用户界面层，以 JavaScript 为基本逻辑通过与中间件通讯、访问底层 API ，进行应用开发。</li>
<li>使用非官方语言的工具，打包成原生应用的方式开发。</li>
<li>基于原生应用的架构，在部分功能中嵌入 WebView 。WebView 负责对界面的渲染，同时也可以访问底层的 API 以实现特定的功能。</li>
<li>通过 JavaScript 引擎管理和渲染 native 视图，将 JavaScript 代码渲染成原生组件，调用原生 API 与用户进行交互。（ReactNative、Weex）</li>
</ol>
</li>
</ol>
<h3 id="Hybrid-的优势"><a href="#Hybrid-的优势" class="headerlink" title="Hybrid 的优势"></a>Hybrid 的优势</h3><ul>
<li>开发效率高</li>
<li>开发成本低</li>
<li>跨平台</li>
<li>快速迭代，无需发布版本即可修复Bug</li>
</ul>
<p>总结来说，Hybrid 是既保持了对原生API的完整掌控，同时可以在特定功能下节省跨平台开发成本、提升效率。</p>
<h3 id="Hybrid-的劣势"><a href="#Hybrid-的劣势" class="headerlink" title="Hybrid 的劣势"></a>Hybrid 的劣势</h3><ul>
<li>容易造成性能问题，不适用于依赖原生 API 、动画较多和游戏开发的需求。</li>
<li>永远保持最新（直接访问线上，而不是使用 App 本地的静态资源）带来的低版本机型的适配问题，包括调用底层 API 和对 H5 的支持方面。（即不太好做版本控制）</li>
<li>需要实现 Native 与 H5 之间的通信机制</li>
<li>交互体验不如原生页面，需要尽可能仿制原生应用的体验</li>
</ul>
<p>总结来说，Web 只能替代、辅助一部分功能，无法取代原生开发的主导地位。</p>
<h2 id="Hybrid-实现"><a href="#Hybrid-实现" class="headerlink" title="Hybrid 实现"></a>Hybrid 实现</h2><h3 id="Native-与前端之间的关系"><a href="#Native-与前端之间的关系" class="headerlink" title="Native 与前端之间的关系"></a>Native 与前端之间的关系</h3><p>Hybrid App 底层依赖于 Native 提供的容器，上层使用 H5 做业务开发，底层透明化、上层多样化，适合前端介入进行快速迭代开发。</p>
<p>Native 提供的实际上是类似于浏览器的宿主环境，H5 页面可以利用宿主环境提供的“能力”来进行开发。正如一般浏览器为 JavaScript 提供了 window 对象以控制浏览器一样，Native 也可以为 H5 页面提供特定的接口以调用底层的 API。</p>
<h3 id="Hybrid-交互设计"><a href="#Hybrid-交互设计" class="headerlink" title="Hybrid 交互设计"></a>Hybrid 交互设计</h3><p>Native 可以调用前端页面的 JavaScript 方法对视图进行操作，前端页面也可以通过 JavaScript 方法调用 Native 提供的接口实现系统层面的功能。两者沟通的桥梁则是 WebView。</p>
<h3 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a><img src="/images/FE-Hybrid-interaction.png" alt="">Schema</h3><p>App 自身可以自定义 URL Schema，并且把自定义的 URL 注册在调度中心。App 安装后会在手机上注册一个 Schema，例如淘宝是 taobao:// ，Native 会有一个进程监控 WebView 发出的所有 schema:// 请求，从而打开 Native 应用并传入参数执行特定的行为。</p>
<p>通过 Schema ，H5 可以通过发起 schema 请求，来实现 H5 与 Native 页面之间的跳转。</p>
<h3 id="常用交互-API"><a href="#常用交互-API" class="headerlink" title="常用交互 API"></a>常用交互 API</h3><ul>
<li>跳转<ul>
<li>页面内部跳转</li>
<li>H5 跳转 Native 界面，Native 通过截获 URL 参数跳转到响应页面。</li>
<li>H5 新打开一个 WebView。</li>
</ul>
</li>
<li>Header 组件<ul>
<li>避免白屏陷入假死状态</li>
<li>Header 左侧和右侧按钮可配置，中间 title 部分可配置</li>
</ul>
</li>
<li>请求类<ul>
<li>通过 Native 代理发起 AJAX 请求，解决跨域问题</li>
</ul>
</li>
<li>Native UI 组件<ul>
<li>Loading 组件</li>
<li>Toast 组件</li>
</ul>
</li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.cnblogs.com/yexiaochai/p/4921635.html" target="_blank" rel="external">http://www.cnblogs.com/yexiaochai/p/4921635.html</a></p>
<p><a href="http://ued.ctrip.com/blog/translation-hybrid-mobile-application-provide-native-web-technology-experience.html" target="_blank" rel="external">http://ued.ctrip.com/blog/translation-hybrid-mobile-application-provide-native-web-technology-experience.html</a></p>
<p><a href="https://dailc.github.io/2016/10/04/hybridBase01HybridInfo.html" target="_blank" rel="external">https://dailc.github.io/2016/10/04/hybridBase01HybridInfo.html</a></p>
<p><a href="https://dailc.github.io/2016/10/04/hybridBase02HybridCompareOthers.html" target="_blank" rel="external">https://dailc.github.io/2016/10/04/hybridBase02HybridCompareOthers.html</a></p>
<p><a href="https://weex.apache.org/cn/" target="_blank" rel="external">https://weex.apache.org/cn/</a></p>
<p><a href="http://www.infoq.com/cn/articles/hybrid-app-development-combat#note-bottom-anchor" target="_blank" rel="external">http://www.infoq.com/cn/articles/hybrid-app-development-combat#note-bottom-anchor</a></p>
<p><a href="http://www.jianshu.com/p/e83aa2d1ade3" target="_blank" rel="external">http://www.jianshu.com/p/e83aa2d1ade3</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-05-19-JSON：JSON 方法小记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/19/2017-05-19-JSON：JSON 方法小记/" class="article-date">
  <time datetime="2017-05-19T12:00:00.000Z" itemprop="datePublished">2017-05-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/19/2017-05-19-JSON：JSON 方法小记/">JSON：JSON 方法小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse()"></a>JSON.parse()</h2><blockquote>
<p>JSON.parse( text[, reviver] )</p>
</blockquote>
<ul>
<li><p>text : 要被解析成 JavaScript 值的字符串</p>
</li>
<li><p>reviver : 规定原始值如何被解析改造的函数</p>
</li>
</ul>
<h3 id="reviver-函数"><a href="#reviver-函数" class="headerlink" title="reviver 函数"></a>reviver 函数</h3><p>解析值本身以及它所包含的值，从里向外调用去调用 <code>reviver</code> 函数。属性名和属性值会作为参数传入 <code>reviver</code> 中，如果 <code>reviver</code> 返回 <code>undefined</code> ，那么当前属性就会从对象中删除；如果返回其他值，返回值就会作为当前属性新的属性值。</p>
<p>注意，遍历到顶层时，传入 <code>reviver</code> 函数的是空字符串和当前对象，即<code>{&quot;&quot; : 修改过的解析值 }</code>。这是个特例，需要特别注意。</p>
<p>所以 <code>reviver</code> 函数有基本两种种用法：</p>
<p>1、删除特定属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var str = &apos;&#123;&quot;a&quot;:1, &quot;b&quot;:2&#125;&apos;;</div><div class="line"></div><div class="line">// 将属性值置为 undefined 删除属性</div><div class="line">var json = JSON.parse(str,function(key, value)&#123;</div><div class="line">    return key == &apos;a&apos; ? undefined : value;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">console.log(json); // &#123;b:2&#125;</div></pre></td></tr></table></figure>
<p>2、修改特定属性的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var str = &apos;&#123;&quot;a&quot;:1, &quot;b&quot;:2&#125;&apos;;</div><div class="line"></div><div class="line">var json = JSON.parse(str, function(key, value)&#123;</div><div class="line">    return key == &apos;a&apos; ? value * 2 : value;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">console.log(json); // &#123;a:2, b:4&#125;</div></pre></td></tr></table></figure>
<h2 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify()"></a>JSON.stringify()</h2><blockquote>
<p>JSON.stringify value[, replacer[, space ]] )</p>
</blockquote>
<ul>
<li>value : 要被转换成 JSON 字符串的值</li>
<li>replacer : 规定如何转换和处理值的属性</li>
<li>space : 指定缩进用的空白字符串</li>
</ul>
<h3 id="replacer-参数"><a href="#replacer-参数" class="headerlink" title="replacer 参数"></a>replacer 参数</h3><h4 id="传入函数"><a href="#传入函数" class="headerlink" title="传入函数"></a>传入函数</h4><p>返回 <code>undefined</code> 代表不输出该属性；输出其他（包括 <code>null</code> ）都会替代原来的属性值输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function replacer(key, value) &#123;</div><div class="line">  if (typeof value === &quot;string&quot;) &#123;</div><div class="line">    return undefined;</div><div class="line">  &#125;</div><div class="line">  return value;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var foo = &#123;foundation: &quot;Mozilla&quot;, model: &quot;box&quot;, week: 45, transport: &quot;car&quot;, month: 7&#125;;</div><div class="line">var jsonString = JSON.stringify(foo, replacer);</div><div class="line"></div><div class="line">console.log(jsonString); // &#123;&quot;week&quot;:45,&quot;month&quot;:7&#125;</div></pre></td></tr></table></figure>
<h4 id="传入数组"><a href="#传入数组" class="headerlink" title="传入数组"></a>传入数组</h4><p>根据属性名指定哪些属性会被输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var foo = &#123;foundation: &quot;Mozilla&quot;, model: &quot;box&quot;, week: 45, transport: &quot;car&quot;, month: 7&#125;;</div><div class="line">var jsonString = JSON.stringify(foo, [&apos;week&apos;,&apos;model&apos;]);</div><div class="line"></div><div class="line">console.log(jsonString); // &#123;&quot;week&quot;:45,&quot;model&quot;:&quot;box&quot;&#125;</div></pre></td></tr></table></figure>
<h4 id="传入-undefined-或-null"><a href="#传入-undefined-或-null" class="headerlink" title="传入 undefined 或 null"></a>传入 <code>undefined</code> 或 <code>null</code></h4><p>输出所有的属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var foo = &#123;foundation: &quot;Mozilla&quot;, model: &quot;box&quot;, week: 45, transport: &quot;car&quot;, month: 7&#125;;</div><div class="line">var jsonString = JSON.stringify(foo, null);</div><div class="line"></div><div class="line">console.log(jsonString); // &#123;&quot;foundation&quot;:&quot;Mozilla&quot;,&quot;model&quot;:&quot;box&quot;,&quot;week&quot;:45,&quot;transport&quot;:&quot;car&quot;,&quot;month&quot;:7&#125;</div></pre></td></tr></table></figure>
<h3 id="space-参数"><a href="#space-参数" class="headerlink" title="space 参数"></a>space 参数</h3><p>指定缩进用的空白字符串，用于美化输出。</p>
<p>如果参数是数字，就代表有多少空格，上限是10；</p>
<p>如果参数是字符串，则为该字符串的前10个字母；</p>
<p>如果参数没有提供，就意味着没有空格。</p>
<p>除此之外，也可以传入转义字符（ <code>\t</code> ）来用 tab 进行缩进。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-05-08-JavaScript：逻辑与 与 逻辑或" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/08/2017-05-08-JavaScript：逻辑与 与 逻辑或/" class="article-date">
  <time datetime="2017-05-08T12:00:00.000Z" itemprop="datePublished">2017-05-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/08/2017-05-08-JavaScript：逻辑与 与 逻辑或/">JavaScript：逻辑与 与 逻辑或</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="逻辑与"><a href="#逻辑与" class="headerlink" title="逻辑与"></a>逻辑与</h2><p>逻辑与是<strong>短路操作</strong>，如果第一个<strong>操作数</strong>能够决定结果，那么将不会对接下来的<strong>操作数</strong>进行<strong>求值</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var a = 0,</div><div class="line">    b = 1;</div><div class="line"></div><div class="line">a &amp;&amp; b++;</div><div class="line"></div><div class="line">console.log(a); // 0</div><div class="line">console.log(b); // 1, b++没有执行</div></pre></td></tr></table></figure>
<h3 id="表达式语句的值"><a href="#表达式语句的值" class="headerlink" title="表达式语句的值"></a>表达式语句的值</h3><p>如果操作数都是<code>True</code>（对象、非空字符串、非<code>0</code>或<code>NaN</code>的数字、布尔值<code>True</code>），则返回最后一个操作数。</p>
<p>如果操作数中有若干个<code>False</code>（<code>Null</code>、<code>Undefined</code>、空字符串、<code>NaN</code>、布尔值<code>False</code>），则返回第一个<code>False</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;&#125; &amp;&amp; false ; // false</div><div class="line">&#123;&#125; &amp;&amp; 0; // 0</div><div class="line">&#123;&#125; &amp;&amp; null; // null</div><div class="line">&#123;&#125; &amp;&amp; undefined; // undefined</div><div class="line"></div><div class="line">null &amp;&amp; 0; // null</div><div class="line"></div><div class="line">&#123;a:1&#125; &amp;&amp; &#123;b:1&#125; &amp;&amp; &#123;c:1&#125;; // &#123;c:1&#125;</div></pre></td></tr></table></figure>
<p>与函数相结合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">true &amp;&amp; foo(); // 执行foo</div><div class="line">true &amp;&amp; false &amp;&amp; foo(); // 返回false，不执行foo</div></pre></td></tr></table></figure>
<h2 id="逻辑或"><a href="#逻辑或" class="headerlink" title="逻辑或"></a>逻辑或</h2><p>逻辑或与逻辑与一样，也是<strong>短路操作</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var a = 0,</div><div class="line">    b = 1;</div><div class="line"></div><div class="line">b || a++;</div><div class="line"></div><div class="line">console.log(a); // 0</div><div class="line">console.log(b); // 1</div></pre></td></tr></table></figure>
<h3 id="表达式语句的值-1"><a href="#表达式语句的值-1" class="headerlink" title="表达式语句的值"></a>表达式语句的值</h3><p>如果操作数都是False，则返回最后一个操作数。</p>
<p>如果操作数中有若干个True，则返回第一个True。</p>
<p>逻辑或一般用于避免给变量赋null或undefined值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var foo = null;</div><div class="line">    bar = 1;</div><div class="line"></div><div class="line">var value = foo || bar;</div></pre></td></tr></table></figure>
<p>也可以用来在函数中对参数进行校验，下面三个函数等价，但是显然第一个是最优雅的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">function(v)&#123;</div><div class="line">    var value = v || defaultValue;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function(v)&#123;</div><div class="line">    var value = !!v ? v : defaultValue;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function(v)&#123;</div><div class="line">    if(v)&#123;</div><div class="line">        var value = v;</div><div class="line">    &#125;else&#123;</div><div class="line">        var value = defaultValue;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2017-05-03-JavaScript：从代码复用到面向对象" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/03/2017-05-03-JavaScript：从代码复用到面向对象/" class="article-date">
  <time datetime="2017-05-03T12:00:00.000Z" itemprop="datePublished">2017-05-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/03/2017-05-03-JavaScript：从代码复用到面向对象/">JavaScript：从代码复用到面向对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="代码复用的问题"><a href="#代码复用的问题" class="headerlink" title="代码复用的问题"></a>代码复用的问题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var foo = &#123;color:&apos;red&apos;&#125;;</div><div class="line">var bar = &#123;color:&apos;green&apos;&#125;;</div></pre></td></tr></table></figure>
<p>这段代码中我们生成了两个属性相似的对象，每次生成一个类似的对象都需要重新写一遍代码。</p>
<h2 id="装饰器函数"><a href="#装饰器函数" class="headerlink" title="装饰器函数"></a>装饰器函数</h2><h3 id="添加属性"><a href="#添加属性" class="headerlink" title="添加属性"></a>添加属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(obj,color)&#123;</div><div class="line">    obj.color = color;</div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// app.js</div><div class="line">var foo = fn(&#123;&#125;,&apos;red&apos;);</div><div class="line">var bar = fn(&#123;&#125;,&apos;green&apos;);</div></pre></td></tr></table></figure>
<p>我们可以通过一个装饰器函数，来解决生成类似对象的问题。</p>
<p>装饰器函数的作用，就是给某个已拥有某些功能的对象添加属性。这里我们传入了一个空的对象，通过fn函数来对这个空对象进行”装饰“（添加属性）。</p>
<h3 id="添加方法"><a href="#添加方法" class="headerlink" title="添加方法"></a>添加方法</h3><h4 id="浪费内存"><a href="#浪费内存" class="headerlink" title="浪费内存"></a>浪费内存</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(obj,color)&#123;</div><div class="line">    obj.color = color;</div><div class="line">    obj.printColor = function()&#123;</div><div class="line">        console.log(this.color);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// app.js</div><div class="line">var foo = fn(&#123;&#125;,&apos;red&apos;);</div><div class="line">foo.printColor(); // red</div><div class="line">var bar = fn(&#123;&#125;,&apos;green&apos;);</div><div class="line">bar.printColor(); // green</div></pre></td></tr></table></figure>
<p>上述添加方法的方式，优点是具有良好的封装性，但是最大的问题是每次调用装饰器函数都会在内存中生成一个新的<code>printColor函数</code>。在对象比较多的情况下，就容易浪费内存。</p>
<h4 id="更多的缺点"><a href="#更多的缺点" class="headerlink" title="更多的缺点"></a>更多的缺点</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(obj,color)&#123;</div><div class="line">    obj.color = color;</div><div class="line">    obj.printColor = printColor;</div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var printColor = function()&#123;</div><div class="line">    console.log(this.printColor);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// app.js</div><div class="line">var foo = fn(&#123;&#125;,&apos;red&apos;);</div><div class="line">foo.printColor(); // red</div><div class="line">var bar = fn(&#123;&#125;,&apos;green&apos;);</div><div class="line">bar.printColor(); // green</div></pre></td></tr></table></figure>
<p>上述添加方法的方式，尽管解决了内存占用的问题，但是失去了良好的封装性。</p>
<p>除此之外，如果添加的方法比较多，每次都需要在fn中对函数进行绑定，效率很低。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(obj,color)&#123;</div><div class="line">    obj.color = color;</div><div class="line">    obj.method_1 = method_1;</div><div class="line">    obj.method_2 = method_2;</div><div class="line">    // ...</div><div class="line">    obj.method_1000 = method_3;</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var method_1 = function()&#123; //... &#125;;</div><div class="line">var method_2 = function()&#123; //... &#125;;</div><div class="line">// ...</div><div class="line">var method_1000 = function()&#123; //... &#125;;</div></pre></td></tr></table></figure>
<h4 id="把方法都装在一起"><a href="#把方法都装在一起" class="headerlink" title="把方法都装在一起"></a>把方法都装在一起</h4><p>在把方法都装进<code>methods</code>中，通过遍历的方式可以把任意数量的方法绑定到<code>obj</code>上。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(obj,color)&#123;</div><div class="line">    obj.color = color;</div><div class="line"></div><div class="line">    extend(obj,methods); // extend()代表把methods中的属性复制到obj中，注意它并不是原生的函数</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var methods = &#123;</div><div class="line">    method_1:function()&#123; //... &#125;,</div><div class="line">    method_2:function()&#123; //... &#125;,</div><div class="line">    // ...</div><div class="line">    method_1000:function()&#123; //... &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="借助Function对象的属性"><a href="#借助Function对象的属性" class="headerlink" title="借助Function对象的属性"></a>借助Function对象的属性</h4><p><code>methods</code>与<code>fn</code>之间没有一个非常明显的联系，为此我们可以利用<code>Function对象</code>的属性来解决。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(obj,color)&#123;</div><div class="line">    obj.color = color;</div><div class="line"></div><div class="line">    extend(obj, fn.methods);</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fn.methods = &#123;</div><div class="line">    method_1:function()&#123; //... &#125;,</div><div class="line">    method_2:function()&#123; //... &#125;,</div><div class="line">    // ...</div><div class="line">    method_1000:function()&#123; //... &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="直接在function内部创建对象"><a href="#直接在function内部创建对象" class="headerlink" title="直接在function内部创建对象"></a>直接在function内部创建对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line"></div><div class="line">var fn = function(color)&#123;</div><div class="line">    var obj = &#123;&#125;;</div><div class="line">    obj.color = color;</div><div class="line"></div><div class="line">    extend(obj, fn.methods);</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="原型委托"><a href="#原型委托" class="headerlink" title="原型委托"></a>原型委托</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(color)&#123;</div><div class="line">    var obj = Object.create(fn.methods);</div><div class="line">    obj.color = color;</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">fn.methods = &#123; //... &#125;;</div></pre></td></tr></table></figure>
<h3 id="使用prototype属性"><a href="#使用prototype属性" class="headerlink" title="使用prototype属性"></a>使用prototype属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(color)&#123;</div><div class="line">    var obj = Object.create(fn.prototype);</div><div class="line">    obj.color = color;</div><div class="line"></div><div class="line">    return obj;</div><div class="line">&#125;</div><div class="line">fn.prototype.printColor = function()&#123;</div><div class="line">    console.log(this.color);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>此时<code>fn</code>就是一个“构造函数”，每一个函数对象被创建时都会有一个<code>prototype</code>属性，这个属性跟之前的<code>fn.methods</code>其实并没有太大的区别，唯一的区别在于<code>prototype.constructor</code>指向了函数对象本身。</p>
<p>在我们讨论“实例的原型”和“构造函数的原型”时要注意：“实例的原型”实际上就是<code>instance.prototype</code>，在实例中没有的属性会被委托到原型中进行查找。而“构造函数的原型”，实际上是“创建一个对象，并且把这个对象委托给原型进行函数共享”。</p>
<h3 id="关系验证"><a href="#关系验证" class="headerlink" title="关系验证"></a>关系验证</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// app.js</div><div class="line">var foo = fn(&apos;red&apos;);</div><div class="line">var bar = fn(&apos;green&apos;);</div><div class="line"></div><div class="line">console.log(foo instanceof fn); // true</div><div class="line">// instanceof 操作符 实际上执行的就是下面的操作</div><div class="line">console.log(foo.constructor == fn.prototype.construector); // true</div></pre></td></tr></table></figure>
<h3 id="new-关键字"><a href="#new-关键字" class="headerlink" title="new 关键字"></a>new 关键字</h3><p>在fn中，创建一个对象、原型委托和返回对象是一定会做的一件事情，我们可以通过<code>new关键字</code>来简化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(color)&#123;</div><div class="line">    this.color = color;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在使用<code>new关键字</code>进行调用时（构造模式），解释器会自动插入两行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// lib.js</div><div class="line">var fn = function(color)&#123;</div><div class="line">    this = Object.create(fn.prototype); // 将新对象委托给原型对象</div><div class="line"></div><div class="line">    this.color;</div><div class="line"></div><div class="line">    return this; // 返回这个新对象</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用构造模式即使用<code>new关键字</code>调用fn函数才能被真正称作“构造函数”。</p>
<h3 id="子类继承"><a href="#子类继承" class="headerlink" title="子类继承"></a>子类继承</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">var Human = function(name)&#123;</div><div class="line">    this.name = name;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Human.prototype.sayName = function()&#123;</div><div class="line">    console.log(this.name);</div><div class="line">&#125;</div><div class="line"></div><div class="line">var Man = function(name)&#123;</div><div class="line">    Human.call(this, name);</div><div class="line">    this.sex = &apos;male&apos;;</div><div class="line">&#125;</div><div class="line">Man.prototype = Object.create(Human.prototype);</div><div class="line">Man.prototype.constructor = Man;</div><div class="line"></div><div class="line">var frank = new Man(&apos;frank&apos;);</div><div class="line"></div><div class="line">frank.sayName(); // frank</div><div class="line">console.log(frank instanceof Man); // true</div><div class="line">console.log(frank instanceof Human); // true</div></pre></td></tr></table></figure>
<p>务必注意<code>Man</code>继承<code>Human</code>时调用的<code>Human</code>方法，其使用<code>call</code>方法指定了<code>this</code>绑定的对象。<code>this</code>在JavaScript中可以作为一个传入的参数来看待，在使用<code>obj.method()</code>时，<code>method</code>中的<code>this</code>指向<code>obj</code>，而使用<code>new method()</code>时，<code>this</code>指向新构造的空对象。</p>
<p>此外，<code>Man.prototype</code>对象的原型委托给了<code>Human.prototype</code>形成了原型链<code>。</code>这里还需要注意要重新指定<code>Man.prototype.constructor</code>赋值<code>Man</code>。</p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">next&raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/fe/">fe</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mac/">mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/react/">react</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/sublime/">sublime</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/svn/">svn</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/07/06/2017-07-06-Shell 脚本入门/">Shell 脚本入门</a>
          </li>
        
          <li>
            <a href="/2017/07/05/2017-07-05-CSS：什么是 BFC/">CSS：什么是 BFC</a>
          </li>
        
          <li>
            <a href="/2017/06/21/2017-06-21-Vue：基础用法与指令/">Vue：基础用法与指令</a>
          </li>
        
          <li>
            <a href="/2017/06/21/2017-06-21-CSS：Animation 动画/">CSS：Animation 动画小记</a>
          </li>
        
          <li>
            <a href="/2017/06/01/2017-06-01-CSS：table-cell 用法小/">CSS：table-cell 用法小记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Xinye Dai<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>